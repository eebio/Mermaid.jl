<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Tutorial · Mermaid.jl</title><meta name="title" content="Tutorial · Mermaid.jl"/><meta property="og:title" content="Tutorial · Mermaid.jl"/><meta property="twitter:title" content="Tutorial · Mermaid.jl"/><meta name="description" content="Documentation for Mermaid.jl."/><meta property="og:description" content="Documentation for Mermaid.jl."/><meta property="twitter:description" content="Documentation for Mermaid.jl."/><script data-outdated-warner src="../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../search_index.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script><link href="../assets/logo.ico" rel="icon" type="image/x-icon"/></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="../"><img src="../assets/logo.svg" alt="Mermaid.jl logo"/></a><div class="docs-package-name"><span class="docs-autofit"><a href="../">Mermaid.jl</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../">Introduction</a></li><li class="is-active"><a class="tocitem" href>Tutorial</a><ul class="internal"><li><a class="tocitem" href="#Components"><span>Components</span></a></li><li><a class="tocitem" href="#Connections"><span>Connections</span></a></li><li><a class="tocitem" href="#Solving-the-hybrid-model"><span>Solving the hybrid model</span></a></li><li><a class="tocitem" href="#Plotting-the-solution"><span>Plotting the solution</span></a></li><li><a class="tocitem" href="#Advanced-Visualisations"><span>Advanced Visualisations</span></a></li></ul></li><li><span class="tocitem">Examples</span><ul><li><a class="tocitem" href="../examples/mtk/">ModelingToolkit Integration</a></li><li><a class="tocitem" href="../examples/duplicated_components/">Advanced Duplicated Components</a></li><li><a class="tocitem" href="../examples/out_of_sync/">Out of sync computation</a></li><li><a class="tocitem" href="../examples/spatial_maps/">Spatial maps</a></li><li><a class="tocitem" href="../examples/surrogates/">Surrogates</a></li><li><a class="tocitem" href="../examples/external_components/">External Components</a></li></ul></li><li><a class="tocitem" href="../interface/">Mermaid Interface</a></li><li><a class="tocitem" href="../is_mermaid_right_for_me/">Is Mermaid right for me?</a></li><li><a class="tocitem" href="../API/">API</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>Tutorial</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Tutorial</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/eebio/Mermaid.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/eebio/Mermaid.jl/blob/main/docs/src/tutorial.md" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="Tutorial"><a class="docs-heading-anchor" href="#Tutorial">Tutorial</a><a id="Tutorial-1"></a><a class="docs-heading-anchor-permalink" href="#Tutorial" title="Permalink"></a></h1><p>In this tutorial, we will:</p><ul><li>Create a hybrid simulation between an Agent-based model, defined in Agents.jl, and an ODE system defined through DifferentialEquations.jl.</li><li>Introduce Mermaid Components for Agents.jl and DifferentialEquations.jl.</li><li>Demonstrate how these Components can be connected together through Connectors.</li><li>Solve the hybrid model.</li><li>Visualise the results of the simulation.</li></ul><p>The example system we will use for this will be a model of a forest fire (governed by an Agent-based model), with the growth of each tree informed by an ODE model.</p><h2 id="Components"><a class="docs-heading-anchor" href="#Components">Components</a><a id="Components-1"></a><a class="docs-heading-anchor-permalink" href="#Components" title="Permalink"></a></h2><p>To begin, we need to define our components. These will be an ODE model component for each tree, and an Agent-based model component for handling the forest level properties (in this case, the spread of heat/fire).</p><h3 id="ODE-Components"><a class="docs-heading-anchor" href="#ODE-Components">ODE Components</a><a id="ODE-Components-1"></a><a class="docs-heading-anchor-permalink" href="#ODE-Components" title="Permalink"></a></h3><p>To define the ODE model, let&#39;s have a look at how to define an ODE Component.</p><article><details class="docstring" open="true"><summary id="Mermaid.DEComponent-tutorial"><a class="docstring-binding" href="#Mermaid.DEComponent-tutorial"><code>Mermaid.DEComponent</code></a> — <span class="docstring-category">Type</span></summary><section><div><pre><code class="language-julia hljs">DEComponent(model::DiffEqBase.AbstractDEProblem, alg;
            name::String=&quot;DE Component&quot;, time_step::Float64=1.0, intkwargs::Tuple=(),
            state_names::Dict{String,Any}=Dict{String,Any}())
DEComponent(model::DiffEqBase.AbstractDEProblem; kwargs...)</code></pre><p><strong>Arguments</strong></p><ul><li><code>model::DiffEqBase.AbstractDEProblem</code>: SciML DE problem (e.g., ODEProblem, etc.)</li><li><code>alg</code>: Algorithm from DifferentialEquations.jl to be used   for solving the DEProblem. If no algorithm is provided, the algorithm will be   automatically chosen by DifferentialEquations.jl.</li></ul><p><strong>Keyword Arguments</strong></p><ul><li><code>name::AbstractString</code>: Name of the component. Defaults to &quot;DE Component&quot;.</li><li><code>time_step::Real</code>: Time step for the component. Defaults to 1.0.</li><li><code>intkwargs</code>: Additional keyword arguments for the DE solver. Defaults to no keywords.</li><li><code>state_names</code>: Dictionary mapping variable names (as strings) to their corresponding   indices in the state vector or symbols from Symbolics.jl. Defaults to an empty   dictionary.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/eebio/Mermaid.jl/blob/167f9ca700a83a4982bbff8faf9bb433be4a2e52/ext/DiffEqExt.jl#L8-L27">source</a></section></details></article><p>We see that we need to define an <code>ODEProblem</code> to use in the component, so let&#39;s create one.</p><pre><code class="language-julia hljs">using OrdinaryDiffEq
function tree!(du, u, p, t)
    heat, life = u
    du[1] = 0
    du[2] = (life*(1-life/10.0)-heat*life)/10
end
u0 = [4.0, 2.0]
tspan = (0.0, 150.0)
prob = ODEProblem(tree!, u0, tspan)</code></pre><p>Next, we want to wrap this ODEProblem inside an DEComponent. For this, we will need to define the <code>state_names</code> field, and should generally provide a value for the <code>name</code> field (since component names in a hybrid simulation should be unique).</p><pre><code class="language-julia hljs">using Mermaid
comp1 = DEComponent(prob, Rodas5();
    name=&quot;tree&quot;, state_names=Dict(&quot;heat&quot; =&gt; 1, &quot;life&quot; =&gt; 2),
)</code></pre><h3 id="Duplicated-Components"><a class="docs-heading-anchor" href="#Duplicated-Components">Duplicated Components</a><a id="Duplicated-Components-1"></a><a class="docs-heading-anchor-permalink" href="#Duplicated-Components" title="Permalink"></a></h3><p>Since the <code>ODEProblem</code> is defined for only a single tree, we can efficiently simulate time ODE system many times by generating a duplicated component. This component stores a single <code>ODEProblem</code> that it will solve across many different states. In this case, we can have a state for each tree in the Agent-based model. Let&#39;s have a look at how to define a <a href="../API/#Mermaid.DuplicatedComponent">DuplicatedComponent</a>.</p><article><details class="docstring" open="true"><summary id="Mermaid.DuplicatedComponent-tutorial"><a class="docstring-binding" href="#Mermaid.DuplicatedComponent-tutorial"><code>Mermaid.DuplicatedComponent</code></a> — <span class="docstring-category">Type</span></summary><section><div><pre><code class="language-julia hljs">DuplicatedComponent &lt;: AbstractComponent</code></pre><p>Represents a component that is duplicated in the simulation, allowing a single component to     have multiple states.</p><p><strong>Fields</strong></p><ul><li><code>component::AbstractTimeDependentComponent</code>: The original component to be duplicated.</li><li><code>instances::Union{Int,Nothing}</code>: Number of instances of the component. If <code>nothing</code>, then   the number is variable and determined by the simulation.</li><li><code>name::String</code>: Name of the duplicated component.</li><li><code>init_states::Vector</code>: Vector of states for the duplicated component, where each state   corresponds to a particular instance.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/eebio/Mermaid.jl/blob/167f9ca700a83a4982bbff8faf9bb433be4a2e52/src/Duplicated.jl#L1-L14">source</a></section></details></article><pre><code class="language-julia hljs">dup_comp = DuplicatedComponent(comp1, [copy(u0) for _ in 1:640];
    instances=640,
)</code></pre><h3 id="Agents.jl-Components"><a class="docs-heading-anchor" href="#Agents.jl-Components">Agents.jl Components</a><a id="Agents.jl-Components-1"></a><a class="docs-heading-anchor-permalink" href="#Agents.jl-Components" title="Permalink"></a></h3><p>Now that we have created our <a href="../API/#Mermaid.DEComponent-Tuple{SciMLBase.AbstractDEProblem, Any}">DEComponent</a>, we can move on to the <a href="../API/#Mermaid.AgentsComponent-Tuple{StandardABM}">AgentsComponent</a>, so let&#39;s have a look at its documentation.</p><article><details class="docstring" open="true"><summary id="Mermaid.AgentsComponent-tutorial"><a class="docstring-binding" href="#Mermaid.AgentsComponent-tutorial"><code>Mermaid.AgentsComponent</code></a> — <span class="docstring-category">Type</span></summary><section><div><pre><code class="language-julia hljs">AgentsComponent(model::StandardABM; name=&quot;Agents Component&quot;,
                state_names=Dict{String,Any}(), time_step::Real=1.0)</code></pre><p>A Mermaid component that wraps an agent-based model (ABM) using the Agents.jl package.</p><p><strong>Arguments</strong></p><ul><li><code>model::StandardABM</code>: The agent-based model to be solved.</li></ul><p><strong>Keyword Arguments</strong></p><ul><li><code>name::AbstractString</code>: The name of the component. Defaults to &quot;Agents Component&quot;.</li><li><code>state_names</code>: A dictionary mapping variable names (as strings) to their corresponding   properties (agent properties or model properties) in the <code>model</code>. Defaults to an empty   dictionary.</li><li><code>time_step::Real</code>: The time step for the component (not the ABM solver timestep), i.e. how   frequently should the inputs and outputs be updated.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/eebio/Mermaid.jl/blob/167f9ca700a83a4982bbff8faf9bb433be4a2e52/ext/AgentsExt.jl#L10-L26">source</a></section></details></article><p>We can see that, again, we need to define the model (this time a <code>StandardABM</code> from <code>Agents.jl</code>), a <code>name</code> and a <code>state_names</code>.</p><pre><code class="language-julia hljs">using Agents, Random, Statistics
@agent struct Tree(GridAgent{2})
    heat::Float64 # Heat is averaged across neighbors, passed to ODE model
    life::Float64 # Life is informed by ODE model
end

function forest_fire(; density=0.4, griddims=(40, 40), seed=2)
    space = GridSpaceSingle(griddims; periodic=false, metric=:chebyshev)
    rng = Random.MersenneTwister(seed)
    forest = StandardABM(Tree, space; rng, agent_step! = tree_step!)
    for _ in 1:floor(density * prod(griddims))
        # Randomly place trees in the grid
        add_agent_single!(forest; heat=rand(), life=rand())
    end
    return forest
end

function tree_step!(tree, forest)
    nearbyheat = mean([getproperty(neighbor, :heat) for neighbor in nearby_agents(tree, forest, 1)])
    if isnan(nearbyheat)
        nearbyheat = 0.0
    end
    tree.heat = tree.heat * 0.9 + nearbyheat * 0.1
    if rand(abmrng(forest)) &lt; 1e-4 # Random chance of fire
        tree.heat = 10.0
    end
    # Simulate tree life cycle
    if tree.heat &gt; 1.0 &amp;&amp; tree.life &gt; 1.0
        # Tree on fire
        tree.heat += 1.0
    else
        # Tree not on fire so heat disappates
        tree.heat -= 0.05
    end
    if tree.heat &lt; 0.0
        tree.heat = 0.0
    end
end

forest = forest_fire()

comp2 = AgentsComponent(forest;
    name=&quot;forest&quot;, state_names=Dict(&quot;heat&quot; =&gt; :heat, &quot;life&quot; =&gt; :life)
)</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">AgentsComponent{StandardABM{GridSpaceSingle{2, false}, Main.Tree, Dict{Int64, Main.Tree}, Tuple{DataType}, typeof(Main.tree_step!), typeof(dummystep), typeof(Agents.Schedulers.fastest), Nothing, Random.MersenneTwister}, String, Dict{String, Symbol}, Int64}(StandardABM with 640 agents of type Tree
 agents container: Dict
 space: GridSpaceSingle with size (40, 40), metric=chebyshev, periodic=false
 scheduler: fastest, &quot;forest&quot;, Dict(&quot;heat&quot; =&gt; :heat, &quot;life&quot; =&gt; :life), 1)</code></pre><h2 id="Connections"><a class="docs-heading-anchor" href="#Connections">Connections</a><a id="Connections-1"></a><a class="docs-heading-anchor-permalink" href="#Connections" title="Permalink"></a></h2><p>We can now set up the connections between the variables in the two components.</p><article><details class="docstring" open="true"><summary id="Mermaid.Connector-tutorial"><a class="docstring-binding" href="#Mermaid.Connector-tutorial"><code>Mermaid.Connector</code></a> — <span class="docstring-category">Type</span></summary><section><div><pre><code class="language-julia hljs">Connector &lt;: AbstractConnector</code></pre><p>Represents a connection between multiple <a href="../API/#Mermaid.ConnectedVariable">ConnectedVariables</a>, possibly with a transformation function.</p><p><strong>Fields</strong></p><ul><li><code>inputs::Vector{&lt;:AbstractConnectedVariable}</code>: Input variables for the connector.</li><li><code>outputs::Vector{&lt;:AbstractConnectedVariable}</code>: Output variables for the connector.</li><li><code>func::Union{Nothing,Function}</code>: Optional function to transform inputs to outputs.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/eebio/Mermaid.jl/blob/167f9ca700a83a4982bbff8faf9bb433be4a2e52/src/connections.jl#L67-L77">source</a></section></details></article><p>The format for specifying a <a href="../API/#Mermaid.ConnectedVariable">ConnectedVariable</a> is given in <a href="../interface/#Mermaid-Interface">Mermaid Interface</a>, but in short, it is a string containing a component name and a variable/state name. It can also contain optional indices for only accessing part of a variable (given at the end of the ConnectedVariable), or for only accessing some subcomponents, such as for DuplicatedComponents (given at the end of the component name).</p><pre><code class="language-julia hljs">conn1 = Connector(inputs=[&quot;forest.heat[1:640]&quot;], outputs=[&quot;tree[1:640].heat&quot;])
conn2 = Connector(inputs=[&quot;tree[1:640].life&quot;], outputs=[&quot;forest.life[1:640]&quot;])</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">Connector(ConnectedVariable[ConnectedVariable{SubString{String}, SubString{String}, Nothing, UnitRange{Int64}}(&quot;tree&quot;, &quot;life&quot;, nothing, 1:640)], ConnectedVariable[ConnectedVariable{SubString{String}, SubString{String}, UnitRange{Int64}, Nothing}(&quot;forest&quot;, &quot;life&quot;, 1:640, nothing)], nothing)</code></pre><h2 id="Solving-the-hybrid-model"><a class="docs-heading-anchor" href="#Solving-the-hybrid-model">Solving the hybrid model</a><a id="Solving-the-hybrid-model-1"></a><a class="docs-heading-anchor-permalink" href="#Solving-the-hybrid-model" title="Permalink"></a></h2><p>To create the hybrid model, we need to create a <a href="../API/#Mermaid.MermaidProblem">MermaidProblem</a>. We can then solve this using the <code>CommonSolve</code> interface.</p><article><details class="docstring" open="true"><summary id="Mermaid.MermaidProblem-tutorial"><a class="docstring-binding" href="#Mermaid.MermaidProblem-tutorial"><code>Mermaid.MermaidProblem</code></a> — <span class="docstring-category">Type</span></summary><section><div><pre><code class="language-julia hljs">MermaidProblem &lt;: AbstractMermaidProblem
MermaidProblem(;
    components::Vector{AbstractComponent},
    connectors::Vector{AbstractConnector},
    max_t::Float64=1.0,
    timescales::Vector{Float64}=ones(length(components)))</code></pre><p>Defines a Mermaid hybrid simulation problem.</p><p><strong>Keyword Arguments</strong></p><ul><li><code>components::Vector{&lt;:AbstractComponent}</code>: Vector of Components.</li><li><code>connectors::Vector{&lt;:AbstractConnector}</code>: Vector of <a href="../API/#Mermaid.Connector">Connector</a>.</li><li><code>max_t::Float64</code>=1.0: Maximum simulation time. Defaults to 1.0.</li><li><code>timescales::Vector{Float64}</code>=ones(length(components)): Timescales for each component.   Each component&#39;s timescale will be multiplied by the component&#39;s time to convert it to   the universal simulation time.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/eebio/Mermaid.jl/blob/167f9ca700a83a4982bbff8faf9bb433be4a2e52/src/mermaidProblems.jl#L3-L20">source</a></section></details></article><pre><code class="language-julia hljs">mp = MermaidProblem(components=[dup_comp, comp2], connectors=[conn1, conn2], max_t=tspan[2])
alg = MinimumTimeStepper()
sol = solve(mp, alg)</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">MermaidSolution{Vector{Any}, Dict{Any, Any}}(Any[0.0, 1.0, 2.0, 3.0, 4.0, 5.0, 6.0, 7.0, 8.0, 9.0  …  141.0, 142.0, 143.0, 144.0, 145.0, 146.0, 147.0, 148.0, 149.0, 150.0], Dict{Any, Any}(ConnectedVariable{SubString{String}, SubString{String}, Nothing, Nothing}(&quot;tree&quot;, &quot;life&quot;, nothing, nothing) =&gt; Any[Any[2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0  …  2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0], Any[2.0796100898856382, 1.9877328094359648, 2.027589835037985, 2.141500469194177, 2.103663756447754, 2.0524236560470284, 2.110134647743908, 2.0756940953643683, 2.0109840284822487, 2.0449502586904975  …  1.9679369562957336, 2.1092956344471427, 1.973036554978502, 1.975971586345802, 2.14400280271757, 2.0347931743323096, 1.9704972089816761, 1.988689507566272, 2.104239475448549, 2.1413418779377498], Any[2.172636339157093, 1.9948188665851532, 2.0693081781680953, 2.284815397798313, 2.2203657205690956, 2.1187756574300978, 2.2296090405786972, 2.1696717185049756, 2.0317575284882174, 2.102734782531533  …  1.954946067463219, 2.222400219480004, 1.9688325343000788, 1.970764545274655, 2.2966948801369265, 2.0832452093047693, 1.9535888685406988, 1.9947951593143642, 2.2164933490663055, 2.2967769316967828], Any[2.2800224713657236, 2.0199828097668218, 2.125286125415834, 2.4324326297944587, 2.351459046146848, 2.1994826852658007, 2.3596229253379577, 2.282113496150286, 2.062615287524483, 2.1738157933628157  …  1.9593012130639054, 2.3409483260374544, 1.9852979661364736, 1.9831678851720733, 2.4598155424666905, 2.145363845388261, 1.9488136554838682, 2.0172843762696155, 2.338126535435783, 2.4680652948982758], Any[2.402904745312128, 2.062565865816996, 2.195939700241729, 2.5868329975744317, 2.4984391809950406, 2.2951886947671913, 2.501481759385263, 2.413577047344665, 2.1039615435034333, 2.258878934613956  …  1.9799057627124685, 2.466598290553123, 2.0212050284465874, 2.012508756623682, 2.635190642707428, 2.2214487107329455, 1.9559334306206997, 2.0556307915517675, 2.470567745892035, 2.6570874870917103], Any[2.542610121686649, 2.122413916946312, 2.281949096143212, 2.750471013933277, 2.6629471437043644, 2.406739516960164, 2.6566003562439833, 2.5649364241475623, 2.156318429130326, 2.3588249827312713  …  2.016167701168937, 2.6010354169781222, 2.0760037021694373, 2.05855885347047, 2.824730376008427, 2.3120594563402923, 1.9749164205555805, 2.10972944253215, 2.6153200301190704, 2.85670565496166], Any[2.7005797834182785, 2.1997126221542134, 2.384246332662855, 2.925775008288868, 2.846770729107272, 2.5351705812008447, 2.8265051527212615, 2.7373366861174695, 2.220329059236511, 2.47476558092994  …  2.067914047253256, 2.7459797169214197, 2.149697529295452, 2.121474264303736, 3.030427219461015, 2.4179947411898626, 2.005927005624889, 2.1798387024032433, 2.773970196036039, 3.065060608246174], Any[2.8781500554526205, 2.2949661354290862, 2.5037999091981913, 3.1151571881138183, 3.0514390600325245, 2.681695660493183, 3.012834418247917, 2.9321565917524577, 2.2967658593532336, 2.60801726784578  …  2.135332627961326, 2.903195735544835, 2.242619623276086, 2.2017536728094216, 3.2456955563211514, 2.5402784939970173, 2.049320843073223, 2.2665386853011653, 2.9481961274088695, 3.281630759932824], Any[3.076744098946605, 2.4089498505708935, 2.64175103374601, 3.321026654511468, 3.267500225228441, 2.847525183821524, 3.217081995390323, 3.143592831023131, 2.386539152442836, 2.7600889567827736  …  2.2189330906252387, 3.0745024067225413, 2.355469945708058, 2.3002091906947566, 3.4686451701814334, 2.680150001289127, 2.105644361864925, 2.3706067011793786, 3.1397709411838433, 3.505767580171886], Any[3.293747694663595, 2.542587964102201, 2.799399901889704, 3.5458002938099633, 3.491173445352256, 3.033930155620727, 3.4390668812691407, 3.3630210094094535, 2.4907054324141145, 2.9325051575088295  …  2.3195168358453575, 3.2617811441697264, 2.4889987399966897, 2.417931882104519, 3.69852341240158, 2.839056025903908, 2.1756373829151356, 2.492972330840211, 3.350562805148811, 3.736698509451207]  …  Any[6.7814276294097455, 9.999943709171541, 9.999951515355878, 9.999966314770964, 3.412290385135919, 1.6760726635293624e-9, 1.5909713652325853e-5, 9.999963478204847, 9.99993727420842, 0.9028667107926633  …  1.7551530326932198e-9, 9.999961382920059, 9.999942313942832, 9.999938606591545, 9.999968469894387, 2.6173321504103536e-11, 9.999918950699692, 9.999941080801712, 9.999963273599134, 9.999968981074373], Any[6.899289260940541, 9.999949065924827, 9.999956129259555, 9.99996952033456, 2.2019700816810994, 1.2296625662785506e-9, 1.3253540186507834e-5, 9.999966953701687, 9.999943243322821, 0.9884363029668441  …  1.172142950347848e-9, 9.999965057808252, 9.999947803468318, 9.999944448914352, 9.999971470372087, 2.5292070639319853e-11, 9.99992666350381, 9.999946687674852, 9.999966768566651, 9.99997193290714], Any[7.023372433152103, 9.999953912920592, 9.999960304095914, 9.999972420850218, 1.3199404024894121, 9.069923178144571e-10, 1.1113230216523806e-5, 9.999970098463354, 9.999948644407024, 1.0811519677100716  …  7.888551248229014e-10, 9.999968382986925, 9.999952770601581, 9.999949735272521, 9.999974185318134, 2.4583533134630015e-11, 9.999933642347827, 9.999951760988889, 9.999969930946138, 9.999974603837382], Any[7.1517135380486785, 9.999958298667774, 9.999964081647072, 9.999975045346769, 0.737133183596904, 6.725826867722262e-10, 9.378046006058618e-6, 9.999972943963085, 9.999953531515139, 1.1814242403088693  …  5.349799979525202e-10, 9.999971391734915, 9.999957265053869, 9.999954518572014, 9.999976641904173, 2.4033376876088242e-11, 9.999939957075421, 9.9999563515177, 9.999972792387153, 9.999977020596235], Any[7.282240636705362, 9.999962267059246, 9.999967499719167, 9.99997742009064, 0.38456998361011413, 5.014320807173039e-10, 7.963027389665934e-6, 9.999975518679111, 9.999957953557544, 1.2896516012324493  …  3.655737042239491e-10, 9.999974114164239, 9.999961331805956, 9.99995884668432, 9.999978864716182, 2.3630470487030894e-11, 9.99994567088411, 9.999960505203564, 9.999975381527465, 9.997035803443547], Any[7.4128274899049345, 9.99996585781105, 9.99997059252071, 9.999979568848726, 0.20930022238652704, 3.7583989780246606e-10, 6.802568633474714e-6, 9.999977848379654, 9.999961954790347, 1.4062124442684982  …  2.5170036992631084e-10, 9.999976577521434, 9.999965011558265, 9.999962762925511, 9.999980876000514, 2.33665071721362e-11, 9.999950840957636, 9.999964263616933, 9.999977724279656, 9.965131069714918], Any[7.5418833949402675, 9.999969106859865, 9.99997339100492, 9.99998151312624, 0.11823246185399268, 2.832161413015312e-10, 5.845693627132302e-6, 9.999979956380814, 9.999965575258262, 1.5314559889192414  …  1.7459809493998522e-10, 9.999978806460245, 9.999968341138175, 9.999966306489723, 9.999982695886533, 2.3235722364658403e-11, 9.999955519038222, 9.999967664372418, 9.999979844090445, 9.885381704142851], Any[7.652267043774655, 9.999972046722627, 9.999975923179498, 9.999983272381938, 0.06867911294015001, 2.1456433776444061e-10, 5.052556052793841e-6, 9.999981863779908, 9.999968851195366, 1.6656922108265155  …  1.2201632522191863e-10, 9.999980823288341, 9.999971353868576, 9.99996951284138, 9.999984342588071, 2.3234691815594116e-11, 9.999959751944354, 9.999970741505225, 9.999981762175342, 9.745325746010963], Any[7.730299816496265, 9.999974706821947, 9.999978214386909, 9.999984864222853, 0.040705116122662, 1.6342617136332967e-10, 4.391829529125301e-6, 9.999983589666607, 9.999971815387685, 1.809180927884191  …  8.590055924660102e-11, 9.999982648190569, 9.999974079901339, 9.99997241407011, 9.999985832585706, 2.3362200441600352e-11, 9.999963582039298, 9.999973525811763, 9.999983497730963, 9.538278233851234], Any[7.765725372235703, 9.999977113780567, 9.999980287558014, 9.999986304580514, 0.024452306601379065, 1.2514408442786046e-10, 3.838748854691424e-6, 9.999985151313982, 9.999974497501324, 1.962120253269969  …  6.091877904899463e-11, 9.999984299430961, 9.999976546519067, 9.99997503921187, 9.9999871807917, 2.3619175338657924e-11, 9.999967047655046, 9.999976045157837, 9.999985068127147, 9.26260048620269]], ConnectedVariable{SubString{String}, SubString{String}, Nothing, Nothing}(&quot;tree&quot;, &quot;heat&quot;, nothing, nothing) =&gt; Any[Any[4.0, 4.0, 4.0, 4.0, 4.0, 4.0, 4.0, 4.0, 4.0, 4.0  …  4.0, 4.0, 4.0, 4.0, 4.0, 4.0, 4.0, 4.0, 4.0, 4.0], Any[0.4056994708920292, 0.8621408571954849, 0.6616126907308237, 0.1093856021447891, 0.2895098423219379, 0.538639413965653, 0.25847781536337067, 0.4247416640213063, 0.7446795829873095, 0.5754903842255096  …  0.9632269394950569, 0.26249607979379186, 0.937089946306283, 0.9220774286060864, 0.09758473280477331, 0.625789503266974, 0.9500964669592646, 0.857280915546428, 0.286745065604205, 0.1101339712456395], Any[0.3497959850313117, 0.7652859002895189, 0.5914898216858787, 0.13095018955359727, 0.24391550126936445, 0.47327573810032236, 0.23230112228923816, 0.34494703650025177, 0.6950909281393338, 0.5139660891267129  …  0.8700902655022237, 0.2611068012826764, 0.8242374065786221, 0.8290507475262149, 0.09005910111709965, 0.5587723173616914, 0.8899774230237123, 0.7701700578056833, 0.2642690979982029, 0.07741480693871126], Any[0.2949506523095099, 0.6739008470713792, 0.5233519268064059, 0.1381195371239467, 0.19780560931977975, 0.4102598258584325, 0.2038191785582441, 0.27217611444498596, 0.6445445851976435, 0.4537267126372872  …  0.7820342099987054, 0.2521781426043584, 0.7190092363212658, 0.7395625169408644, 0.07608258884219153, 0.49475093015283994, 0.829353955661512, 0.6872856574995521, 0.2380639922312799, 0.042548993092919], Any[0.24095324457196782, 0.5872550025873265, 0.4569090049485745, 0.13365853724822307, 0.15124762030902827, 0.34935377377589183, 0.17317073919849613, 0.20517197645867852, 0.5931979962524601, 0.3945308611830369  …  0.6984244329770226, 0.23681348369712107, 0.6204255143407574, 0.6533491415097359, 0.056621461573636664, 0.4331636996860057, 0.7682943839369256, 0.6080485852097542, 0.20861958137507103, 0.0058579326442458335], Any[0.18763282041993212, 0.5047217671004359, 0.3919182489579908, 0.11980377308195093, 0.10431023731127097, 0.2903471134255444, 0.1405004923742531, 0.14288171691452384, 0.5411842356536942, 0.3361820065450534  …  0.6187029447840557, 0.21595326476414062, 0.5276337610530785, 0.5702067814956655, 0.03249665788741668, 0.3735465496137675, 0.7068705147607216, 0.531964734118281, 0.1763587055726823, 0.0], Any[0.135132101819687, 0.4261763504747926, 0.32817645582287563, 0.09836419526702812, 0.057056003176950795, 0.2330537795383753, 0.1059559230285423, 0.08442428857148694, 0.4886408245543363, 0.2785227776653319  …  0.5423794278047208, 0.19039927501110715, 0.43989938946040286, 0.48995214629100664, 0.004405549107862103, 0.3155168573615855, 0.6451544902342429, 0.45861644820027997, 0.14164667446012968, 0.0], Any[0.08430385509296144, 0.35136825264791827, 0.26635738176824686, 0.07080264028072249, 0.010877351631743228, 0.1773096645095314, 0.06968399085984922, 0.02906338775391265, 0.43568667243190107, 0.22144499103638932  …  0.4690234871817515, 0.1608352933276081, 0.3572248151672399, 0.41241986942887915, 0.0, 0.2587599404787417, 0.5832166012814555, 0.387663496080575, 0.10479935460542915, 0.0], Any[0.03507463487312722, 0.28009972115536896, 0.2064302729874381, 0.0383018334812186, 0.0, 0.12357410337470535, 0.03262847769110007, 0.0, 0.38242313744034334, 0.16490604852842905  …  0.39825771834471513, 0.1278446597281836, 0.2791640461073816, 0.3374602365778441, 0.0, 0.20302017479847173, 0.5211238323404401, 0.31924100705773695, 0.0660900869180719, 0.0], Any[0.0, 0.2125402679364557, 0.14835180494922295, 0.0018178274390837357, 0.0, 0.07189405771146411, 0.0, 0.0, 0.32893655354722545, 0.10947496013394252  …  0.32977151298631374, 0.09192526232584124, 0.20640839832132946, 0.26499367641526295, 0.0, 0.14809095062923655, 0.45894109249300324, 0.2535496615043272, 0.02575560773986564, 0.0]  …  Any[0.16400026217519342, 0.0, 0.0, 0.0, 4.194240970266494, 4.150664342307108, 2.8938872228996724, 0.0, 0.0, 0.0  …  5.115042578169678, 0.0, 0.0, 0.0, 0.0, 1.4014063482425354, 0.0, 0.0, 0.0, 0.0], Any[0.14360633338725404, 0.0, 0.0, 0.0, 5.104301627316801, 4.097135988360083, 2.8266499987795415, 0.0, 0.0, 0.0  …  5.037225725859947, 0.0, 0.0, 0.0, 0.0, 1.342496956389519, 0.0, 0.0, 0.0, 0.0], Any[0.12556230775087662, 0.0, 0.0, 0.0, 5.94546266401363, 4.043611283004962, 2.761282705314569, 0.0, 0.0, 0.0  …  4.960064064507046, 0.0, 0.0, 0.0, 0.0, 1.284140991142033, 0.0, 0.0, 0.0, 0.0], Any[0.11010449171718024, 0.0, 0.0, 0.0, 6.725777630214801, 3.990089291056859, 2.6976478244995175, 0.0, 0.0, 0.0  …  4.883534669317904, 0.0, 0.0, 0.0, 0.0, 1.2263326664266199, 0.0, 0.0, 0.0, 0.0], Any[0.09737735309997202, 0.0, 0.0, 0.0, 7.452304422279733, 3.9365689660378584, 2.6356208788684796, 0.0, 0.0, 0.0  …  4.807615728256618, 0.0, 0.0, 0.0, 0.0, 1.1690656580434708, 0.0, 0.0, 0.0, 0.003093472778653239], Any[0.08745248175571772, 0.0, 0.0, 0.0, 7.0547807621758, 3.8830492197871855, 2.575088988466701, 0.0, 0.0, 0.0  …  4.7322865204201765, 0.0, 0.0, 0.0, 0.0, 1.1123332196114415, 0.0, 0.0, 0.0, 0.03388426608461419], Any[0.07960266289777725, 0.0, 0.0, 0.0, 6.695241459367954, 3.8295289835546957, 2.5159496046705563, 0.0, 0.0, 0.0  …  4.657527389945749, 0.0, 0.0, 0.0, 0.0, 1.0561282806097876, 0.0, 0.0, 0.0, 0.08789600832544166], Any[0.0949358457124705, 0.0, 0.0, 0.0, 6.422964864931978, 3.7760072609118165, 2.458109398007511, 0.0, 0.0, 0.0  …  4.583319716005155, 0.0, 0.0, 0.0, 0.0, 1.0004435291043705, 0.0, 0.0, 0.0, 0.16128891374174414], Any[0.12937125756638285, 0.0, 0.0, 0.0, 6.225574088073212, 3.7224831707472203, 2.4014832801328385, 0.0, 0.0, 0.0  …  4.509645879503848, 0.0, 0.0, 0.0, 0.0, 0.9452714813810397, 0.0, 0.0, 0.0, 0.2507708356405692], Any[0.17945501962980187, 0.0, 0.0, 0.0, 6.093110342642303, 3.6689560399117305, 2.3459935427314313, 0.0, 0.0, 0.0  …  4.436489227118252, 0.0, 0.0, 0.0, 0.0, 0.8906045403946548, 0.0, 0.0, 0.0, 0.35352080489586735]], ConnectedVariable{SubString{String}, SubString{String}, Nothing, Nothing}(&quot;forest&quot;, &quot;heat&quot;, nothing, nothing) =&gt; Any[[0.31697297370953315, 0.9019442852469484, 0.552292202884825, 0.010586336990597855, 0.4221532149351479, 0.857280915546428, 0.018549043254140973, 0.9032025955054463, 0.5302247341105649, 0.36120456779231924  …  0.023836707037078853, 0.9566432215786556, 0.6852846949618958, 0.48140335105572807, 0.31585364917166225, 0.8297800254674621, 0.2929970720203482, 0.6177724286804258, 0.7331476100918907, 0.6365344676359204], [0.25106590083937763, 0.8061662483084966, 0.5018642515818463, 0.0, 0.36445953381616225, 0.7701700578056833, 0.0, 0.7923975536001365, 0.42720226069950845, 0.34286122438641015  …  0.0005976427719493055, 0.8350939390064527, 0.6063531362093015, 0.3981546567617196, 0.289576938508048, 0.7369821390684467, 0.2715981021615615, 0.5730481806661835, 0.6669785586611509, 0.5871482917366181], [0.18869872422353418, 0.7165746095407494, 0.45194851857513213, 0.0, 0.309725312529085, 0.6872856574995521, 0.0, 0.6893760678111059, 0.3344820346295576, 0.3195925382998657  …  0.0, 0.7249512432135046, 0.5306829211135023, 0.31933024012727473, 0.2603800949821761, 0.6487964346332189, 0.24502057667431215, 0.5260121811784484, 0.6016916141687156, 0.5360579309162993], [0.1295631235490614, 0.6322317491051355, 0.4023319370346784, 0.0, 0.2573034997041278, 0.6080485852097542, 0.0, 0.5930775641655952, 0.2510338311666019, 0.29208012100715436  …  0.0, 0.6243862627661987, 0.457823107116165, 0.2443754582537564, 0.22858310863079434, 0.564735545914177, 0.21406037848422094, 0.4770884225399091, 0.5372083905412219, 0.48358155576486855], [0.07353149151203547, 0.5523476371651597, 0.35285715741518314, 0.0, 0.2066678679141975, 0.531964734118281, 0.0, 0.5025884650743144, 0.17593044804994168, 0.2609115050705132  …  0.0, 0.531860738592217, 0.38738827854286423, 0.17281836238840564, 0.19447223166625022, 0.48437503568529733, 0.17941340237129177, 0.42663994495754604, 0.47346013172344364, 0.4299881933113681], [0.020236300864191523, 0.47625609412225794, 0.303408450792269, 0.0, 0.15739151840763121, 0.45861644820027997, 0.0, 0.41744718580032636, 0.10833740324494752, 0.2265989629888267  …  0.0, 0.44608076549026454, 0.3190489080118634, 0.10602818924582484, 0.15830326717164261, 0.40734450273448214, 0.14167960405230107, 0.37497865027474203, 0.4103947859815889, 0.3755054782601294], [0.0, 0.4033949149885359, 0.25390243750889835, 0.0, 0.10912914833718114, 0.387663496080575, 0.0, 0.3371936498533347, 0.04750366292045277, 0.18959089917780608  …  0.0, 0.3659594730165403, 0.252524021308073, 0.04542537032124236, 0.12030458964663605, 0.3347883930211716, 0.10137452799195941, 0.32237891779562283, 0.3480143964076904, 0.3203291495546873], [0.0, 0.33328922471181965, 0.20428155895034283, 0.0, 0.06160242502032415, 0.31924100705773695, 0.0, 0.261327750189273, 0.0, 0.15027614930721156  …  0.0, 0.290585262504523, 0.1880949114583061, 0.0, 0.08067990832760012, 0.2663298388857098, 0.05894125907209728, 0.2690739972212956, 0.28632311147685263, 0.2648890822886945], [0.0, 0.26553753544756653, 0.15450902006796663, 0.0, 0.014587925905276009, 0.2535496615043272, 0.0, 0.19096618505217466, 0.0, 0.10900434856232431  …  0.0, 0.21919389652936222, 0.12684332172018647, 0.0, 0.03961078648285625, 0.20161259672276843, 0.014761336791008009, 0.21527426937060473, 0.2253263775851556, 0.20988665395275324], [0.0, 0.19980006439390918, 0.10456447267630041, 0.0, 0.0, 0.1904410015184988, 0.0, 0.12646351145412393, 0.0, 0.06608903931759726  …  0.0, 0.15116323901980017, 0.068623318899782, 0.0, 0.0, 0.14031374283348774, 0.0, 0.16116965811601625, 0.165048260106526, 0.15548181773017367]  …  [7.845237343488007, 0.0, 0.0, 4.1778510247134575, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0  …  0.0, 0.0, 0.0, 3.4038568262688127, 0.0, 2.4070061530291453, 0.0, 0.0, 0.0, 2.4308068537774083], [7.6632589955661485, 0.0, 0.0, 4.10980296874686, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0  …  0.0, 0.0, 0.0, 3.310941807520402, 0.0, 2.339420687176112, 0.0, 0.0, 0.0, 2.3623586098335068], [7.54680300758811, 0.0, 0.0, 4.04211559139785, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0  …  0.0, 0.0, 0.0, 3.2194451262257986, 0.0, 2.2720716505034724, 0.0, 0.0, 0.0, 2.2941953923310696], [7.487976927017802, 0.0, 0.0, 3.974790452208919, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0  …  0.0, 0.0, 0.0, 3.1293380273960585, 0.0, 2.2049626585241695, 0.0, 0.0, 0.0, 2.226320993008937], [7.4456264476419065, 0.0, 0.0, 3.9078291888694396, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0  …  0.0, 0.0, 0.0, 3.040591460180753, 0.0, 2.138097062853711, 0.0, 0.0, 0.0, 2.1587387840328964], [7.382457763179176, 0.0, 0.0, 3.841233487583423, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0  …  0.0, 0.0, 0.0, 2.953176272545101, 0.0, 2.0714779566078483, 0.0, 0.0, 0.0, 2.091451738189744], [7.303349630063357, 0.0, 0.0, 3.775005061006129, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0  …  0.0, 0.0, 0.0, 2.8670633674273507, 0.0, 2.0051081818243173, 0.0, 0.0, 0.0, 2.0244624502516535], [7.214135861425428, 0.0, 0.0, 3.7091455829059226, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0  …  0.0, 0.0, 0.0, 2.782223827274727, 0.0, 1.9389903383589417, 0.0, 0.0, 0.0, 1.9577731589699365], [7.120405748049786, 0.0, 0.0, 3.643657958009828, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0  …  0.0, 0.0, 0.0, 2.6986290126612724, 0.0, 1.873126793811757, 0.0, 0.0, 0.0, 1.8913857692674347], [7.026578956407458, 0.0, 0.0, 3.578546962810849, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0  …  0.0, 0.0, 0.0, 2.6162506396994867, 0.0, 1.8075196941259548, 0.0, 0.0, 0.0, 1.8253018742903802]], ConnectedVariable{SubString{String}, SubString{String}, Nothing, Nothing}(&quot;forest&quot;, &quot;life&quot;, nothing, nothing) =&gt; Any[[0.9981524689156519, 0.04012657305194167, 0.52561035445006, 0.0034119548949205214, 0.29106598429109853, 0.2266802283321938, 0.01977093022608567, 0.06324343290801016, 0.2826281490429592, 0.7629345621932843  …  0.49920284686502947, 0.4767388645441094, 0.9910606892436803, 0.9617136222541233, 0.9571806266623273, 0.2885882175063139, 0.5263090812568187, 0.16218117856891057, 0.6714506470124705, 0.04972326238325486], [2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0  …  2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0], [2.097953501089474, 1.979914538401519, 2.0496517047894534, 2.16254033117459, 2.0762259751093355, 1.988689507566272, 2.160837050163853, 1.9796678772737397, 2.0541339584797584, 2.088789016399243  …  2.1597067163241994, 1.9692202729531219, 2.022843764383885, 2.0640849809881208, 2.098185934794796, 1.994111786770159, 2.102937821642342, 2.0364087280962226, 2.013281271378851, 2.032629908530315], [2.212901447291752, 1.9790996112650012, 2.109995115576979, 2.336828703584716, 2.16603034291238, 1.9947951593143642, 2.335029046382418, 1.9815575555381866, 2.130194811479796, 2.183520808270673  …  2.3336968192220957, 1.9629871155438698, 2.0615272858212315, 2.146460205605244, 2.2047262760778747, 2.0067094033739448, 2.213546178568937, 2.0819218129155788, 2.039700413486404, 2.075238962775457], [2.3458431032237255, 1.9959282675899892, 2.1815459663143906, 2.520646106703399, 2.2699231907623023, 2.0172843762696155, 2.518751415850607, 2.003746920278057, 2.2277175436378442, 2.2856162267771536  …  2.5173487933061067, 1.9783543592200905, 2.1159244139676514, 2.2477240259373557, 2.320865493515861, 2.036838299401825, 2.3334821513364092, 2.1374078080055776, 2.0793152984527192, 2.1285726807026797], [2.4979600928299375, 2.029438458836081, 2.2649869338810165, 2.71380223684108, 2.388643307648063, 2.0556307915517675, 2.711814998392449, 2.0451409254715958, 2.3466881061058347, 2.3965235732849326  …  2.7103438139973117, 2.0134858447500346, 2.1862749100587546, 2.36884088472514, 2.4479257316891183, 2.084065946834007, 2.4644515139288177, 2.2037918411254225, 2.132423881658119, 2.1934677736363737], [2.670550487904758, 2.079196143102127, 2.3611623224158818, 2.915989166784242, 2.5231377006055267, 2.10972944253215, 2.913913083468854, 2.1052960131408867, 2.4874185241276607, 2.5177338734055748  …  2.9123760714446987, 2.0673702448211935, 2.2731451918459835, 2.511105789254368, 2.587316147351859, 2.1483958565538988, 2.6082208586582625, 2.2820790827556796, 2.199552504078989, 2.27087229205051], [2.865061586133202, 2.145203243885142, 2.4710765904811973, 3.126775336034585, 2.674546273917759, 2.1798387024032433, 3.124615374220593, 2.184232980000985, 2.6504448997394947, 2.6507948688869774  …  3.1230162044477545, 2.1396346449808363, 2.3774028786648165, 2.6756484614778664, 2.7405412391074964, 2.2302084006868177, 2.766631020438676, 2.3733749790597343, 2.281448198595761, 2.361863726531158], [3.0737637388154297, 2.2278359975849518, 2.5958948972577858, 3.3456024272045766, 2.844188959258002, 2.2665386853011653, 3.343364832205547, 2.2823694115435993, 2.8364378667842747, 2.7973236113262026  …  3.3417081217800715, 2.2304209917107127, 2.500200437871851, 2.863260330670357, 2.9092073506599103, 2.329881673850292, 2.94160830213203, 2.478901214482433, 2.3790658696567735, 2.4676646067618835], [3.290657040666991, 2.3278040288260677, 2.7369442078079, 3.5717856287991685, 3.0335529798067875, 2.3706067011793786, 3.5694779039978197, 2.40048246986952, 3.043944497286631, 2.9590180624926745  …  3.567769202016462, 2.3403032539427255, 2.6428286582584812, 3.0718877644841536, 3.0950263989630384, 2.4480634740715073, 3.1351713446982394, 2.600011046360098, 2.493567957099531, 2.5895894574140197]  …  [0.014387191921712356, 9.999932915745806, 9.999948614366273, 7.051219623910242e-8, 9.999957411325598, 9.99993488425589, 9.999966660972369, 9.99993818405124, 9.999957710036288, 9.999954679460787  …  9.99996663614249, 9.999935376155017, 9.999946965201277, 6.696117861280335e-8, 9.999958472331882, 1.2211527685659357e-17, 9.999959390452219, 9.999943202594174, 9.99993997198608, 5.85802183425396e-14], [0.0070410751437639755, 9.999939299617889, 9.999953504333115, 5.0966059339932285e-8, 9.999961464158195, 9.999941080801712, 9.999969833590749, 9.999944066583625, 9.999961734443026, 9.999958992262625  …  9.999969811123728, 9.999941525891002, 9.999952012105437, 5.215871063645382e-8, 9.999962424197152, 1.0537053835193625e-17, 9.999963254947437, 9.999948607554185, 9.999945684375845, 5.0422801310531525e-14], [0.0035508599008108586, 9.999945075991247, 9.999957928962209, 3.709101841414601e-8, 9.999965131315609, 9.999946687674852, 9.999972704296303, 9.999949389325005, 9.999965375879617, 9.999962894650313  …  9.999972683967291, 9.999947090408748, 9.999956578737557, 4.1013674004379605e-8, 9.99996599999541, 9.154058810898656e-18, 9.999966751689886, 9.999953498169276, 9.999950853165478, 4.3700642073508486e-14], [0.0018236520212393144, 9.999950302675753, 9.99996193253555, 2.7177640384483393e-8, 9.999968449499177, 9.999951760988889, 9.999975301819527, 9.999954205545455, 9.999968670789988, 9.999966425679338  …  9.999975283425066, 9.999952125397956, 9.999960710800766, 3.25511060818758e-8, 9.999969235513676, 8.006512703096043e-18, 9.999969915675404, 9.999957923384931, 9.999955530084348, 3.813478791096608e-14], [0.0009475744487211696, 9.999955031980177, 9.999965555121278, 2.0049075946075342e-8, 9.999971451917723, 9.9999563515177, 9.999977652156899, 9.99995856344593, 9.999971652150052, 9.999969620688672  …  9.999977635512893, 9.999956681248959, 9.999964449649115, 2.607212775315952e-8, 9.999972163133474, 7.050144644237622e-18, 9.999972778569616, 9.999961927489016, 9.999959761939309, 3.350542597294519e-14], [0.0004952702219190728, 9.999959311235637, 9.999968832974655, 1.4890211484027507e-8, 9.999974168619923, 9.999960505203564, 9.999979778831046, 9.999962506640616, 9.999974349797723, 9.999972511654429  …  9.999979763770924, 9.999960803556995, 9.99996783270141, 2.1071744983253103e-8, 9.999974812154896, 6.2498150281824965e-18, 9.999975369024833, 9.999965550554979, 9.999963591083112, 2.963853272262284e-14], [0.00025996312536763933, 9.999963183269253, 9.999971798900896, 1.1133083342739173e-8, 9.999976626795002, 9.999964263616933, 9.999981703126172, 9.999966074593397, 9.999976790731534, 9.999975127509861  …  9.999981689499204, 9.999964533578483, 9.999970893815686, 1.7182198893339036e-8, 9.999977209089804, 5.577508446087389e-18, 9.999977712966801, 9.999968828842894, 9.999967055838232, 2.6395707906326146e-14], [0.00013731733094427017, 9.999966686832739, 9.999974482583452, 8.379580309131525e-9, 9.999978851044833, 9.999967664372418, 9.999983444301044, 9.999969303012772, 9.999978999380808, 9.999977494434914  …  9.99998343197085, 9.999967908643894, 9.99997366362804, 1.4133618849004992e-8, 9.999979377927191, 5.010793902166667e-18, 9.999979833854146, 9.999971795162319, 9.99997019088038, 2.3666398182102955e-14], [7.310968280780991e-5, 9.999969856990191, 9.999976910881086, 6.349000154454393e-9, 9.999980863630162, 9.999970741505225, 9.999985019781743, 9.99997222420922, 9.999980997850152, 9.999979636118233  …  9.99998500862492, 9.99997096253133, 9.99997616985922, 1.1726484780099825e-8, 9.999981340373223, 4.531638382356277e-18, 9.999981752913149, 9.999974479200645, 9.999973027585517, 2.1361922162426042e-14], [3.9273452376285643e-5, 9.999972725469007, 9.999979108096667, 4.842266050693021e-9, 9.999982684693371, 9.999973525811763, 9.999986445336054, 9.999974867418542, 9.999982806140682, 9.999981573994232  …  9.999986435240945, 9.99997372580456, 9.999978437592054, 9.81221029552581e-9, 9.999983116068487, 4.1254888180573436e-18, 9.99998348935018, 9.999976907820196, 9.999975594343853, 1.941085960796579e-14]]))</code></pre><h2 id="Plotting-the-solution"><a class="docs-heading-anchor" href="#Plotting-the-solution">Plotting the solution</a><a id="Plotting-the-solution-1"></a><a class="docs-heading-anchor-permalink" href="#Plotting-the-solution" title="Permalink"></a></h2><p>After running <code>solve</code>, we get <code>sol</code>, a <a href="../API/#Mermaid.MermaidSolution">MermaidSolution</a> instance. This stores all variables given in <code>state_names</code> at each timepoint.</p><article><details class="docstring" open="true"><summary id="Mermaid.MermaidSolution-tutorial"><a class="docstring-binding" href="#Mermaid.MermaidSolution-tutorial"><code>Mermaid.MermaidSolution</code></a> — <span class="docstring-category">Type</span></summary><section><div><pre><code class="language-julia hljs">MermaidSolution{X, Y} &lt;: AbstractMermaidSolution</code></pre><p>Stores the solution of a <a href="../API/#Mermaid.MermaidProblem">MermaidProblem</a> over time.</p><p><strong>Fields</strong></p><ul><li><code>t::X</code>: Time points at which the solution is saved.</li><li><code>u::Y</code>: Dictionary mapping variables to their solution arrays.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/eebio/Mermaid.jl/blob/167f9ca700a83a4982bbff8faf9bb433be4a2e52/src/solutions.jl#L1-L9">source</a></section></details></article><pre><code class="language-julia hljs">using Plots

plot(sol.t, sol[&quot;forest.life[1]&quot;], color=:green, label=&quot;Life&quot;)
plot!(sol.t, sol[&quot;forest.heat[1]&quot;], color=:red, label=&quot;Heat&quot;)</code></pre><h2 id="Advanced-Visualisations"><a class="docs-heading-anchor" href="#Advanced-Visualisations">Advanced Visualisations</a><a id="Advanced-Visualisations-1"></a><a class="docs-heading-anchor-permalink" href="#Advanced-Visualisations" title="Permalink"></a></h2><p>While we can plot the variables from the ODE component easily, the Agent-based model is a bit more challenging. But default, we only store the variables given in state_names in the solution. This can be changed by providing <code>save_vars=[&quot;forest.#model&quot;]</code> to <code>solve</code>, in which case the full Agent-based model state will be visable in the solution at all timepoints.</p><div class="admonition is-success" id="#model-and-Special-Variables-df28ca76f3f9a2d5"><header class="admonition-header">#model and Special Variables<a class="admonition-anchor" href="##model-and-Special-Variables-df28ca76f3f9a2d5" title="Permalink"></a></header><div class="admonition-body"><p><code>&quot;#model&quot;</code> is a special variable for AgentsComponents. Special variables, denoted by starting with <code>#</code> are not saved by default but can be used with connectors, <code>getstate</code>, <code>setstate!</code>, or <code>save_vars</code>. To view the special variables of a component, you can call <code>variables(component)</code>.</p></div></div><p>However, this can be wasteful if we know we only want an animation of the model (which can be generated during simulation). We will set up a <a href="../API/#Mermaid.Connector">Connector</a> which takes an input of the model&#39;s current state, and instead of a transformation, we will use a function which adds the current state to a video.</p><pre><code class="language-julia hljs">using Makie
using CairoMakie

groupcolor(tree) = tree.heat &gt; 1 ? :red : :green
groupmarker(a) = a.life &gt; 1 ? :utriangle : :circle
fig, ax = abmplot(forest; agent_color=groupcolor, agent_marker=groupmarker, agent_size=10)
io = VideoStream(fig)
function plot_input(model)
    empty!(ax)
    abmplot!(ax, model; agent_color=groupcolor, agent_marker=groupmarker, agent_size=10)
    recordframe!(io)
end

conn3 = Connector(
    inputs=[&quot;forest.#model&quot;],
    outputs=Vector{String}(),
    func=(model) -&gt; plot_input(model)
)

mp = MermaidProblem(components=[dup_comp, comp2], connectors=[conn1, conn2, conn3], max_t=tspan[2])
sol = solve(mp, alg)

save(&quot;forest_fire.mp4&quot;, io)</code></pre><p><video src="../forest_fire.mp4" controls="true" title="An animation of the forest fire simulation"><a href="../forest_fire.mp4">An animation of the forest fire simulation</a></video></p></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../">« Introduction</a><a class="docs-footer-nextpage" href="../examples/mtk/">ModelingToolkit Integration »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.17.0 on <span class="colophon-date" title="Wednesday 25 February 2026 10:44">Wednesday 25 February 2026</span>. Using Julia version 1.12.5.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
